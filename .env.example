# ========================================
# PDF MERGER SERVER - ENVIRONMENT VARIABLES
# ========================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env file to git (it's in .gitignore)

# ========================================
# APPLICATION
# ========================================
NODE_ENV=production
PORT=3000

# ========================================
# DATABASE (REQUIRED)
# ========================================
# PostgreSQL connection string
# Format: postgresql://USERNAME:PASSWORD@HOST:PORT/DATABASE?schema=public
# 
# Examples:
# - Supabase: Get from Project Settings → Database → Connection String (URI)
#   DATABASE_URL="postgresql://postgres.xxxxx:password@aws-0-region.pooler.supabase.com:5432/postgres"
# 
# - Neon: Get from Dashboard → Connection String
#   DATABASE_URL="postgresql://user:password@ep-xxx.region.aws.neon.tech/dbname?sslmode=require"
# 
# - Railway: Get from Database → Connect → Postgres Connection URL
#   DATABASE_URL="postgresql://postgres:password@containers-us-west-xxx.railway.app:5432/railway"
#
DATABASE_URL="postgresql://user:password@localhost:5432/pdf_merger?schema=public"

# Optional: Direct connection URL for migrations (usually same as DATABASE_URL)
DIRECT_URL=

# ========================================
# REDIS (REQUIRED)
# ========================================
# Redis server details for job queue (BullMQ)
#
# Examples:
# - Upstash Redis: Get from Console → Redis → Details
#   REDIS_HOST=gusc1-xxx.upstash.io
#   REDIS_PORT=6379
#   REDIS_PASSWORD=your-upstash-password
#
# - Redis Cloud: Get from Database → Configuration
#   REDIS_HOST=redis-xxxxx.cloud.redislabs.com
#   REDIS_PORT=12345
#   REDIS_PASSWORD=your-redis-password
#
# - Railway Redis: Get from Redis → Connect
#   REDIS_HOST=containers-us-west-xxx.railway.app
#   REDIS_PORT=6379
#   REDIS_PASSWORD=your-railway-redis-password
#
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ========================================
# S3-COMPATIBLE STORAGE (REQUIRED)
# ========================================
# Storage for PDF files
#
# Examples:
# - Supabase Storage:
#   STORAGE_REGION=us-east-1
#   STORAGE_ACCESS_KEY=your-supabase-access-key (from Project Settings → API → service_role key)
#   STORAGE_SECRET_KEY=your-supabase-secret-key
#   STORAGE_BUCKET_NAME=pdf-files
#   STORAGE_ENDPOINT=https://your-project-ref.supabase.co/storage/v1/s3
#
# - AWS S3:
#   STORAGE_REGION=us-east-1
#   STORAGE_ACCESS_KEY=AKIAIOSFODNN7EXAMPLE
#   STORAGE_SECRET_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
#   STORAGE_BUCKET_NAME=pdf-merger-bucket
#   STORAGE_ENDPOINT=https://s3.us-east-1.amazonaws.com
#
# - MinIO (Self-hosted):
#   STORAGE_REGION=us-east-1
#   STORAGE_ACCESS_KEY=minioadmin
#   STORAGE_SECRET_KEY=minioadmin
#   STORAGE_BUCKET_NAME=pdf-merger-bucket
#   STORAGE_ENDPOINT=http://localhost:9000
#
STORAGE_REGION=us-east-1
STORAGE_ACCESS_KEY=your_access_key_here
STORAGE_SECRET_KEY=your_secret_key_here
STORAGE_BUCKET_NAME=pdf-merger-bucket
STORAGE_ENDPOINT=https://your-s3-endpoint.com

# ========================================
# WORKER CONFIGURATION
# ========================================
# Number of concurrent PDF processing jobs (1-20)
# Recommended: 5 for serverless, 10 for dedicated server
WORKER_CONCURRENCY=5

# Temporary directory for file processing
# Netlify: Use /tmp (serverless)
# Other: Use ./tmp or /var/tmp
TEMP_DIR=/tmp

# ========================================
# LOGGING
# ========================================
# Log level: error | warn | info | debug | trace
# Production: info or warn
# Development: debug
LOG_LEVEL=info

# ========================================
# SENTRY (OPTIONAL)
# ========================================
# Error tracking and monitoring
# Get from: Sentry.io → Project Settings → Client Keys (DSN)
#
# Example:
# SENTRY_DSN=https://abc123@o123456.ingest.sentry.io/7654321
# SENTRY_TRACES_SAMPLE_RATE=0.1
#
# SENTRY_DSN=
# SENTRY_TRACES_SAMPLE_RATE=0.1

# ========================================
# RATE LIMITING
# ========================================
# Throttle settings to prevent abuse
# TTL: Time window in milliseconds
# LIMIT: Max requests per TTL window
THROTTLE_TTL=60000
THROTTLE_LIMIT=10
